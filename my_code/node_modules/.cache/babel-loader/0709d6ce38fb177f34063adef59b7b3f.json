{"ast":null,"code":"import { takeEvery, put, call } from 'redux-saga/effects';\nimport { GET_USER_PROJECTS, CREATE_USER_PROJECT, DELETE_USER_PROJECT, ADD_USER_IN_PROJECT, putDeletedUserProject, putGottenUserProjects, putCreatedUserProject } from './actions';\nimport fetchWithAuth from '../fetchWithAuth';\nimport * as config from '../config';\n\nfunction fetchGetProjects(data) {\n  return fetchWithAuth(config.URL_PROJECT_API);\n}\n\nfunction fetchCreateProjects(data) {\n  const USER_TOKEN = store.getState().auth.token;\n  return fetch(config.URL_PROJECT_API, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${USER_TOKEN}`\n    }\n  }).then(response => response.status === 404 || response.ok ? response.json() : Promise.reject(response)).catch(e => console.error(e));\n}\n\nfunction fetchDeleteProjects(projectId) {\n  const USER_TOKEN = store.getState().auth.token;\n  return fetch(`${config.URL_PROJECT_API}/${projectId}`, {\n    method: 'DELETE',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${USER_TOKEN}`\n    }\n  }).then(response => response.status === 404 || response.ok ? response.json() : Promise.reject(response)).catch(e => console.error(e));\n}\n\nfunction fetchAddUserInProjects(projectId) {\n  const USER_TOKEN = store.getState().auth.token;\n  return fetch(`${config.URL_PROJECT_API}/${projectId}`, {\n    method: 'DELETE',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${USER_TOKEN}`\n    }\n  }).then(response => response.status === 404 || response.ok ? response.json() : Promise.reject(response)).catch(e => console.error(e));\n} // Workers\n\n\nfunction* workerGetProjects(action) {\n  const response = yield call(fetchGetProjects, action.payload);\n  if (response) yield put(putGottenUserProjects(response));\n}\n\nfunction* workerCreateProjects(action) {\n  const response = yield call(fetchCreateProjects, action.payload);\n  if (response) yield put(putCreatedUserProject(response.data));\n}\n\nfunction* workerDeleteProjects(action) {\n  const response = yield call(fetchDeleteProjects, action.payload);\n  if (response) yield put(putDeletedUserProject(response.data));\n} // Watchers \n\n\nexport function* watchGetProjects() {\n  yield takeEvery(GET_USER_PROJECTS, workerGetProjects);\n}\nexport function* watchCreateProjects() {\n  yield takeEvery(CREATE_USER_PROJECT, workerCreateProjects);\n}\nexport function* watchDeleteProjects() {\n  yield takeEvery(DELETE_USER_PROJECT, workerDeleteProjects);\n}\nexport function* watchAddUserInProject() {\n  yield takeEvery(ADD_USER_IN_PROJECT, fetchAddUserInProjects);\n}","map":{"version":3,"sources":["C:/Users/limon/Desktop/my projects/myCode/myCode.React/my_code/src/store/projects/sagas.js"],"names":["takeEvery","put","call","GET_USER_PROJECTS","CREATE_USER_PROJECT","DELETE_USER_PROJECT","ADD_USER_IN_PROJECT","putDeletedUserProject","putGottenUserProjects","putCreatedUserProject","fetchWithAuth","config","fetchGetProjects","data","URL_PROJECT_API","fetchCreateProjects","USER_TOKEN","store","getState","auth","token","fetch","method","body","JSON","stringify","headers","then","response","status","ok","json","Promise","reject","catch","e","console","error","fetchDeleteProjects","projectId","fetchAddUserInProjects","workerGetProjects","action","payload","workerCreateProjects","workerDeleteProjects","watchGetProjects","watchCreateProjects","watchDeleteProjects","watchAddUserInProject"],"mappings":"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","sourcesContent":["import {takeEvery, put, call} from 'redux-saga/effects';\r\nimport {\r\n  GET_USER_PROJECTS,\r\n  CREATE_USER_PROJECT,\r\n  DELETE_USER_PROJECT,\r\n  ADD_USER_IN_PROJECT,\r\n  putDeletedUserProject,\r\n  putGottenUserProjects,\r\n  putCreatedUserProject\r\n} from './actions';\r\n\r\nimport fetchWithAuth from '../fetchWithAuth';\r\nimport * as config from '../config';\r\n\r\n\r\nfunction fetchGetProjects(data) {\r\n  return fetchWithAuth(config.URL_PROJECT_API);\r\n}\r\n\r\nfunction fetchCreateProjects(data) {\r\n  const USER_TOKEN = store.getState().auth.token;\r\n  return fetch(config.URL_PROJECT_API, { \r\n    method: 'POST', \r\n    body: JSON.stringify(data),\r\n    headers: {      \r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${USER_TOKEN}`\r\n    },\r\n  })\r\n    .then(response => response.status === 404 || response.ok ? response.json() : Promise.reject(response))\r\n    .catch((e) => console.error(e));\r\n  \r\n}\r\n\r\nfunction fetchDeleteProjects(projectId) {\r\n  const USER_TOKEN = store.getState().auth.token;\r\n  return fetch(`${config.URL_PROJECT_API}/${projectId}`, { \r\n    method: 'DELETE', \r\n    headers: {      \r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${USER_TOKEN}`\r\n    },\r\n  })\r\n    .then(response => response.status === 404 || response.ok ? response.json() : Promise.reject(response))\r\n    .catch((e) => console.error(e));\r\n  \r\n}\r\n\r\nfunction fetchAddUserInProjects(projectId) {\r\n  const USER_TOKEN = store.getState().auth.token;\r\n  return fetch(`${config.URL_PROJECT_API}/${projectId}`, { \r\n    method: 'DELETE', \r\n    headers: {      \r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${USER_TOKEN}`\r\n    },\r\n  })\r\n    .then(response => response.status === 404 || response.ok ? response.json() : Promise.reject(response))\r\n    .catch((e) => console.error(e));\r\n  \r\n}\r\n\r\n\r\n// Workers\r\n\r\nfunction* workerGetProjects(action) {\r\n  \r\n\tconst response = yield call(fetchGetProjects, action.payload);\r\n  \r\n\tif (response) \t\r\n    yield put(putGottenUserProjects(response));\r\n}\r\n\r\nfunction* workerCreateProjects(action) {\r\n  \r\n\tconst response = yield call(fetchCreateProjects, action.payload);\r\n  \r\n\tif (response) \t\r\n    yield put(putCreatedUserProject(response.data));\r\n}\r\n\r\nfunction* workerDeleteProjects(action) {\r\n  \r\n\tconst response = yield call(fetchDeleteProjects, action.payload);\r\n  \r\n\tif (response) \t\r\n    yield put(putDeletedUserProject(response.data));\r\n}\r\n\r\n\r\n\r\n// Watchers \r\n\r\nexport function* watchGetProjects() {\r\n  yield takeEvery(GET_USER_PROJECTS, workerGetProjects);\r\n}\r\n\r\nexport function* watchCreateProjects() {\r\n  yield takeEvery(CREATE_USER_PROJECT, workerCreateProjects);\r\n}\r\n\r\nexport function* watchDeleteProjects() {\r\n  yield takeEvery(DELETE_USER_PROJECT, workerDeleteProjects);\r\n}\r\n\r\nexport function* watchAddUserInProject() {\r\n  yield takeEvery(ADD_USER_IN_PROJECT, fetchAddUserInProjects);\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}