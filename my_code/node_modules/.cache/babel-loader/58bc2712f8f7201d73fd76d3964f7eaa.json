{"ast":null,"code":"import { takeEvery, put, call } from 'redux-saga/effects';\nimport { GET_USER_PROJECTS, GET_PROJECT_BY_ID, GET_OTHER_PROJECTS, CREATE_USER_PROJECT, UPDATE_USER_PROJECT, DELETE_USER_PROJECT, ADD_USER_IN_PROJECT, DELETE_USER_IN_PROJECT, GET_SNIPPETS, CREATE_SNIPPETS, GET_COMPONENTS, UPDATE_SNIPPETS, CREATE_COMPONENT, DELETE_COMPONENT, putDeletedUserProject, putGottenProjectById, putGottenUserProjects, putGottenOtherProjects, putCreatedUserProject, putUpdatedUserProject, putAddedUserInProject, putDeletedUserInProject, putCreatedSnippets, putGottenSnippets, putAddedComponenInProject, putDeletedComponenInProject, putGottenComponents } from './actions';\nimport fetchWithAuth from '../fetchWithAuth';\nimport * as config from '../config';\nimport { addNotify } from '../notify/actions';\nimport store from '../index'; // Workers\n\nfunction* workerGetProjects(action) {\n  const response = yield fetchWithAuth(config.URL_PROJECT_API);\n  if (response && response.success === true) yield put(putGottenUserProjects(response));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerGetProjectById(action) {\n  const response = yield fetchWithAuth(`${config.URL_PROJECT_API}/${action.payload}`);\n  if (response && response.success === true) yield put(putGottenProjectById(response));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerGetOtherProjects(action) {\n  const response = yield fetchWithAuth(`${config.URL_PROJECT_API}/other`);\n  if (response && response.success === true) yield put(putGottenOtherProjects(response, store.getState().auth.user.id));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerCreateProjects(action) {\n  const response = yield fetchWithAuth(config.URL_PROJECT_API, 'POST', action.payload);\n  ;\n  if (response && response.success === true) yield put(putCreatedUserProject(response.data));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerUpdateProjects(action) {\n  const response = yield fetchWithAuth(config.URL_PROJECT_API + '1234', 'PUT', action.payload);\n  ;\n  if (response && response.success === true) yield put(putUpdatedUserProject(response.data));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerDeleteProjects(action) {\n  const response = yield fetchWithAuth(`${config.URL_PROJECT_API}/${action.payload}`, 'DELETE');\n  if (response && response.success === true) yield put(putDeletedUserProject(response));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerAddUserInProject(action) {\n  const response = yield fetchWithAuth(`${config.URL_PROJECT_API}/users`, 'POST', action.payload);\n  if (response && response.success === true) yield put(putAddedUserInProject(response));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerDeleteUserInProject(action) {\n  const url = `${config.URL_PROJECT_API}/users/${action.payload.userId}_${action.payload.projectId}`;\n  const response = yield fetchWithAuth(url, 'DELETE');\n  if (response && response.success === true) yield put(putDeletedUserInProject(response));else yield put(addNotify({\n    message: response.message\n  }));\n} // Snippets\n\n\nfunction* workerGetSnippets(action) {\n  const response = yield fetchWithAuth(`${config.URL_SNIPPET_API}/component${action.payload}`);\n  if (response && response.success === true) yield put(putGottenSnippets(response));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerCreateSnippet(action) {\n  const response = yield fetchWithAuth(`${config.URL_SNIPPET_API}`, 'POST', action.payload);\n  if (response && response.success === true) yield put(putCreatedSnippets(response));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerUpdateSnippet(action) {\n  const response = yield fetchWithAuth(`${config.URL_SNIPPET_API}/${action.payload.snippetId}`, 'PUT', action.payload.data);\n  console.log(response, 'ответ');\n  if (response && response.success === true) yield put(addNotify({\n    message: 'Сниппет сохранен'\n  }));else yield put(addNotify({\n    message: 'Возникла ошибка на сервере'\n  }));\n}\n\nfunction* workerGetComponents(action) {\n  const response = yield fetchWithAuth(`${config.URL_COMPONENT_API}/project${action.payload}`);\n\n  if (response && response.success === true) {\n    yield put(putGottenComponents(response));\n  } else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerCreateComponent(action) {\n  const response = yield fetchWithAuth(config.URL_COMPONENT_API, 'POST', action.payload);\n  if (response && response.success === true) yield put(putAddedComponenInProject(response));else yield put(addNotify({\n    message: response.message\n  }));\n}\n\nfunction* workerDeleteComponent(action) {\n  const response = yield fetchWithAuth(`${config.URL_COMPONENT_API}/${action.payload}`, 'DELETE');\n  console.log(response);\n  if (response && response.success === true) yield put(putDeletedComponenInProject(response));else yield put(addNotify({\n    message: 'Возникла ошибка на сервере'\n  }));\n} // Watchers \n\n\nexport function* watchGetProjects() {\n  yield takeEvery(GET_USER_PROJECTS, workerGetProjects);\n}\nexport function* watchGetProjectById() {\n  yield takeEvery(GET_PROJECT_BY_ID, workerGetProjectById);\n}\nexport function* watchGetOtherProjects() {\n  yield takeEvery(GET_OTHER_PROJECTS, workerGetOtherProjects);\n}\nexport function* watchCreateProjects() {\n  yield takeEvery(CREATE_USER_PROJECT, workerCreateProjects);\n}\nexport function* watchUpdateProjects() {\n  yield takeEvery(CREATE_USER_PROJECT, workerUpdateProjects);\n}\nexport function* watchDeleteProjects() {\n  yield takeEvery(DELETE_USER_PROJECT, workerDeleteProjects);\n}\nexport function* watchAddUserInProject() {\n  yield takeEvery(ADD_USER_IN_PROJECT, workerAddUserInProject);\n}\nexport function* watchDeleteUserInProject() {\n  yield takeEvery(DELETE_USER_IN_PROJECT, workerDeleteUserInProject);\n}\nexport function* watchGetSnippets() {\n  yield takeEvery(GET_SNIPPETS, workerGetSnippets);\n}\nexport function* watchCreateSnippet() {\n  yield takeEvery(CREATE_SNIPPETS, workerCreateSnippet);\n}\nexport function* watchUpdateSnippet() {\n  yield takeEvery(UPDATE_SNIPPETS, workerUpdateSnippet);\n}\nexport function* watchGetComponents() {\n  yield takeEvery(GET_COMPONENTS, workerGetComponents);\n}\nexport function* wathcCreateComponent() {\n  yield takeEvery(CREATE_COMPONENT, workerCreateComponent);\n}\nexport function* wathcDeletedComponent() {\n  yield takeEvery(DELETE_COMPONENT, workerDeleteComponent);\n}","map":{"version":3,"sources":["C:/Users/limon/Desktop/my projects/myCode/myCode.React/my_code/src/store/projects/sagas.js"],"names":["takeEvery","put","call","GET_USER_PROJECTS","GET_PROJECT_BY_ID","GET_OTHER_PROJECTS","CREATE_USER_PROJECT","UPDATE_USER_PROJECT","DELETE_USER_PROJECT","ADD_USER_IN_PROJECT","DELETE_USER_IN_PROJECT","GET_SNIPPETS","CREATE_SNIPPETS","GET_COMPONENTS","UPDATE_SNIPPETS","CREATE_COMPONENT","DELETE_COMPONENT","putDeletedUserProject","putGottenProjectById","putGottenUserProjects","putGottenOtherProjects","putCreatedUserProject","putUpdatedUserProject","putAddedUserInProject","putDeletedUserInProject","putCreatedSnippets","putGottenSnippets","putAddedComponenInProject","putDeletedComponenInProject","putGottenComponents","fetchWithAuth","config","addNotify","store","workerGetProjects","action","response","URL_PROJECT_API","success","message","workerGetProjectById","payload","workerGetOtherProjects","getState","auth","user","id","workerCreateProjects","data","workerUpdateProjects","workerDeleteProjects","workerAddUserInProject","workerDeleteUserInProject","url","userId","projectId","workerGetSnippets","URL_SNIPPET_API","workerCreateSnippet","workerUpdateSnippet","snippetId","console","log","workerGetComponents","URL_COMPONENT_API","workerCreateComponent","workerDeleteComponent","watchGetProjects","watchGetProjectById","watchGetOtherProjects","watchCreateProjects","watchUpdateProjects","watchDeleteProjects","watchAddUserInProject","watchDeleteUserInProject","watchGetSnippets","watchCreateSnippet","watchUpdateSnippet","watchGetComponents","wathcCreateComponent","wathcDeletedComponent"],"mappings":"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","sourcesContent":["import {takeEvery, put, call} from 'redux-saga/effects';\r\nimport {\r\n  GET_USER_PROJECTS,\r\n  GET_PROJECT_BY_ID,\r\n  GET_OTHER_PROJECTS,\r\n  CREATE_USER_PROJECT,\r\n  UPDATE_USER_PROJECT,\r\n  DELETE_USER_PROJECT,\r\n  ADD_USER_IN_PROJECT,\r\n  DELETE_USER_IN_PROJECT,\r\n  GET_SNIPPETS,\r\n  CREATE_SNIPPETS,\r\n  GET_COMPONENTS,\r\n  UPDATE_SNIPPETS,\r\n  CREATE_COMPONENT, \r\n  DELETE_COMPONENT,\r\n  \r\n  putDeletedUserProject,\r\n  putGottenProjectById,\r\n  putGottenUserProjects,\r\n  putGottenOtherProjects,\r\n  putCreatedUserProject,\r\n  putUpdatedUserProject,\r\n  putAddedUserInProject,\r\n  putDeletedUserInProject,\r\n  putCreatedSnippets,\r\n  putGottenSnippets,\r\n  putAddedComponenInProject, \r\n  putDeletedComponenInProject,\r\n  putGottenComponents,\r\n} from './actions';\r\n\r\nimport fetchWithAuth from '../fetchWithAuth';\r\nimport * as config from '../config';\r\nimport { addNotify } from '../notify/actions';\r\nimport store from '../index';\r\n\r\n// Workers\r\n\r\nfunction* workerGetProjects(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(config.URL_PROJECT_API);\r\n  \r\n\tif (response && response.success === true) \t\r\n    yield put(putGottenUserProjects(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerGetProjectById(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_PROJECT_API}/${action.payload}`);\r\n  \r\n\tif (response && response.success === true) \t\r\n    yield put(putGottenProjectById(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerGetOtherProjects(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_PROJECT_API}/other`);\r\n  \r\n\tif (response && response.success === true) \t\r\n    yield put(putGottenOtherProjects(response, store.getState().auth.user.id));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerCreateProjects(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(config.URL_PROJECT_API, 'POST', action.payload);;\r\n  \r\n\tif (response && response.success === true) \t\r\n    yield put(putCreatedUserProject(response.data));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerUpdateProjects(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(config.URL_PROJECT_API + '1234', 'PUT', action.payload);;\r\n  \r\n\tif (response && response.success === true) \t\r\n    yield put(putUpdatedUserProject(response.data));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\n\r\nfunction* workerDeleteProjects(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_PROJECT_API}/${action.payload}`, 'DELETE');\r\n  \r\n\tif (response && response.success === true) \t\r\n    yield put(putDeletedUserProject(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerAddUserInProject(action) {\r\n  const response = yield fetchWithAuth(`${config.URL_PROJECT_API}/users`, 'POST', action.payload);\r\n  \r\n\tif (response && response.success === true) \t\r\n    yield put(putAddedUserInProject(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerDeleteUserInProject(action) {\r\n  const url = `${config.URL_PROJECT_API}/users/${action.payload.userId}_${action.payload.projectId}`;\r\n  const response = yield fetchWithAuth(url, 'DELETE');\r\n\r\n\tif (response && response.success === true) \t\r\n    yield put(putDeletedUserInProject(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\n\r\n// Snippets\r\nfunction* workerGetSnippets(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_SNIPPET_API}/component${action.payload}`);\r\n\r\n\tif (response && response.success === true) \r\n    yield put(putGottenSnippets(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerCreateSnippet(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_SNIPPET_API}`, 'POST', action.payload);\r\n\r\n\tif (response && response.success === true) \r\n    yield put(putCreatedSnippets(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerUpdateSnippet(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_SNIPPET_API}/${action.payload.snippetId}`, 'PUT', action.payload.data);\r\n  console.log(response, 'ответ');\r\n\tif (response && response.success === true) \r\n    yield put(addNotify({message: 'Сниппет сохранен'}));\r\n  else \r\n    yield put(addNotify({message: 'Возникла ошибка на сервере'}));\r\n}\r\n\r\nfunction* workerGetComponents(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_COMPONENT_API}/project${action.payload}`);\r\n\r\n\tif (response && response.success === true) {\r\n    yield put(putGottenComponents(response));\r\n  }\r\n    \r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerCreateComponent(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(config.URL_COMPONENT_API, 'POST', action.payload);\r\n\r\n\tif (response && response.success === true) \t\r\n    yield put(putAddedComponenInProject(response));\r\n  else \r\n    yield put(addNotify({message: response.message}));\r\n}\r\n\r\nfunction* workerDeleteComponent(action) {\r\n  \r\n\tconst response = yield fetchWithAuth(`${config.URL_COMPONENT_API}/${action.payload}`, 'DELETE');\r\n  console.log(response)\r\n\tif (response && response.success === true) \t\r\n    yield put(putDeletedComponenInProject(response));\r\n  else \r\n    yield put(addNotify({message: 'Возникла ошибка на сервере'}));\r\n}\r\n// Watchers \r\n\r\nexport function* watchGetProjects() {\r\n  yield takeEvery(GET_USER_PROJECTS, workerGetProjects);\r\n}\r\n\r\nexport function* watchGetProjectById() {\r\n  yield takeEvery(GET_PROJECT_BY_ID, workerGetProjectById);\r\n}\r\n\r\nexport function* watchGetOtherProjects() {\r\n  yield takeEvery(GET_OTHER_PROJECTS, workerGetOtherProjects);\r\n}\r\n\r\nexport function* watchCreateProjects() {\r\n  yield takeEvery(CREATE_USER_PROJECT, workerCreateProjects);\r\n}\r\n\r\nexport function* watchUpdateProjects() {\r\n  yield takeEvery(CREATE_USER_PROJECT, workerUpdateProjects);\r\n}\r\n\r\nexport function* watchDeleteProjects() {\r\n  yield takeEvery(DELETE_USER_PROJECT, workerDeleteProjects);\r\n}\r\n\r\nexport function* watchAddUserInProject() {\r\n  yield takeEvery(ADD_USER_IN_PROJECT, workerAddUserInProject);\r\n}\r\n\r\nexport function* watchDeleteUserInProject() {\r\n  yield takeEvery(DELETE_USER_IN_PROJECT, workerDeleteUserInProject);\r\n}\r\n\r\nexport function* watchGetSnippets() {\r\n  yield takeEvery(GET_SNIPPETS, workerGetSnippets);\r\n}\r\n\r\nexport function* watchCreateSnippet() {\r\n  yield takeEvery(CREATE_SNIPPETS, workerCreateSnippet);\r\n}\r\n\r\nexport function* watchUpdateSnippet() {\r\n  yield takeEvery(UPDATE_SNIPPETS, workerUpdateSnippet);\r\n}\r\n\r\nexport function* watchGetComponents() {\r\n  yield takeEvery(GET_COMPONENTS, workerGetComponents);\r\n}\r\n\r\nexport function* wathcCreateComponent() {\r\n  yield takeEvery(CREATE_COMPONENT, workerCreateComponent);\r\n}\r\n\r\nexport function* wathcDeletedComponent() {\r\n  yield takeEvery(DELETE_COMPONENT, workerDeleteComponent);\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}