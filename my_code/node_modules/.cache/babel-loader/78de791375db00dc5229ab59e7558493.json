{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\limon\\\\Desktop\\\\my projects\\\\myCode\\\\myCode.React\\\\my_code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\limon\\\\Desktop\\\\my projects\\\\myCode\\\\myCode.React\\\\my_code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\limon\\\\Desktop\\\\my projects\\\\myCode\\\\myCode.React\\\\my_code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\limon\\\\Desktop\\\\my projects\\\\myCode\\\\myCode.React\\\\my_code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\limon\\\\Desktop\\\\my projects\\\\myCode\\\\myCode.React\\\\my_code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{useParams}from'react-router-dom';import AceEditor from\"react-ace\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCopy,faExpand,faTrash,faSave}from'@fortawesome/free-solid-svg-icons';import\"ace-builds/src-noconflict/theme-tomorrow_night\";import\"ace-builds/src-noconflict/mode-javascript\";import{matchPath}from'react-router-dom';import'./Editor.sass';import Loader from'../UI/Loader/Loader';import store from'../../store/index';import classNames from'classnames';var Editor=/*#__PURE__*/function(_Component){_inherits(Editor,_Component);var _super=_createSuper(Editor);function Editor(props){var _this;_classCallCheck(this,Editor);_this=_super.call(this,props);_this.state={fullscreen:false};_this.onClickFullscreenButton=_this.onClickFullscreenButton.bind(_assertThisInitialized(_this));_this.editor=React.createRef();return _this;}_createClass(Editor,[{key:\"onClickFullscreenButton\",value:function onClickFullscreenButton(){this.setState({fullscreen:!this.state.fullscreen});}},{key:\"onCopyAllButton\",value:function onCopyAllButton(){//\n}},{key:\"componentDidMount\",value:function componentDidMount(){this.bindSaveKeys();console.log(this.editor);}},{key:\"bindSaveKeys\",value:function bindSaveKeys(){var _this2=this;var timer;document.addEventListener('keydown',function(e){if(e.ctrlKey&&e.keyCode==83){e.preventDefault();clearTimeout(timer);timer=setTimeout(_this2.onSaveSnippet.bind(_this2),300);}});}},{key:\"onSaveSnippet\",value:function onSaveSnippet(){var snippetId=this.match.params.snippetId;var snippets=store.getState().snippets.snippetsList.data;if(!snippets)return false;var snippet=snippets.filter(function(snippet){return snippetId==snippet.id;})[0];console.log(snippet.text);this.props.onClickSaveButton({snippetId:snippetId,data:{text:snippet.text}});}},{key:\"onChangeEditor\",value:function onChangeEditor(value,snippet){snippet.text=value;}},{key:\"render\",value:function render(){var _this$props$snippets,_this$props$snippets$,_this3=this;var className=classNames({'editor':true,'fullscreen':this.state.fullscreen});this.match=matchPath(this.props.location.pathname,{path:'/project:projectId/component:componentId/snippet:snippetId'});if((_this$props$snippets=this.props.snippets)===null||_this$props$snippets===void 0?void 0:(_this$props$snippets$=_this$props$snippets.snippetsList)===null||_this$props$snippets$===void 0?void 0:_this$props$snippets$.data){var snippet=this.props.snippets.snippetsList.data.filter(function(snippet){return _this3.match.params.snippetId==snippet.id;})[0];return/*#__PURE__*/React.createElement(\"div\",{className:className},/*#__PURE__*/React.createElement(\"div\",{id:\"editor-area\",className:\"editor__area\"},/*#__PURE__*/React.createElement(AceEditor,{mode:\"javascript\",ref:this.editor,onChange:function onChange(value){_this3.onChangeEditor(value,snippet);},theme:\"tomorrow_night\",value:snippet.text||'',name:'snippet_'+snippet.id,editorProps:{$blockScrolling:true},height:\"100%\",width:\"100%\",tabSize:2,fontSize:\"16px\",placeholder:\"\\u0412\\u0441\\u0442\\u0430\\u0432\\u0442\\u0435 \\u043A\\u043E\\u0434, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0439 \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",style:{padding:'10px'},setOptions:{enableBasicAutocompletion:true,enableLiveAutocompletion:true,enableSnippets:true}})),/*#__PURE__*/React.createElement(\"div\",{className:\"editor__panel\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"editor__controls\"},/*#__PURE__*/React.createElement(\"li\",{className:\"editor__control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"editor__button\",onClick:this.onClickFullscreenButton},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faExpand}))),/*#__PURE__*/React.createElement(\"li\",{className:\"editor__control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"editor__button\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCopy}))),/*#__PURE__*/React.createElement(\"li\",{className:\"editor__control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"editor__button\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrash}))),/*#__PURE__*/React.createElement(\"li\",{className:\"editor__control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"editor__button\",onClick:function onClick(){_this3.props.onClickSaveButton({snippetId:_this3.match.params.snippetId,data:{text:snippet.text}});}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}))))));}else{return/*#__PURE__*/React.createElement(Loader,null);}}}]);return Editor;}(Component);;export default Editor;","map":{"version":3,"sources":["C:/Users/limon/Desktop/my projects/myCode/myCode.React/my_code/src/components/Editor/Editor.jsx"],"names":["React","Component","useParams","AceEditor","FontAwesomeIcon","faCopy","faExpand","faTrash","faSave","matchPath","Loader","store","classNames","Editor","props","state","fullscreen","onClickFullscreenButton","bind","editor","createRef","setState","bindSaveKeys","console","log","timer","document","addEventListener","e","ctrlKey","keyCode","preventDefault","clearTimeout","setTimeout","onSaveSnippet","snippetId","match","params","snippets","getState","snippetsList","data","snippet","filter","id","text","onClickSaveButton","value","className","location","pathname","path","onChangeEditor","$blockScrolling","padding","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport AceEditor from \"react-ace\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faCopy, faExpand, faTrash, faSave } from '@fortawesome/free-solid-svg-icons'\r\nimport \"ace-builds/src-noconflict/theme-tomorrow_night\";\r\nimport \"ace-builds/src-noconflict/mode-javascript\";\r\nimport {matchPath} from 'react-router-dom';\r\nimport './Editor.sass';\r\nimport Loader from '../UI/Loader/Loader';\r\nimport store from '../../store/index';\r\nimport classNames from 'classnames';\r\n\r\n\r\nclass Editor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fullscreen: false\r\n    };\r\n\r\n    this.onClickFullscreenButton = this.onClickFullscreenButton.bind(this);\r\n    this.editor = React.createRef();\r\n  }\r\n\r\n  onClickFullscreenButton() {\r\n    this.setState({ fullscreen: !this.state.fullscreen });\r\n  }\r\n\r\n  onCopyAllButton() {\r\n    //\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.bindSaveKeys();\r\n    console.log(this.editor);\r\n  }\r\n\r\n  bindSaveKeys() {\r\n    let timer;\r\n    document.addEventListener('keydown', (e) => {\r\n      if (e.ctrlKey && e.keyCode == 83) {\r\n        e.preventDefault();\r\n        clearTimeout(timer);\r\n\r\n        timer = setTimeout(this.onSaveSnippet.bind(this), 300);\r\n      }\r\n    });\r\n  }\r\n\r\n  onSaveSnippet() {\r\n    const snippetId = this.match.params.snippetId\r\n    const snippets = store.getState().snippets.snippetsList.data;\r\n    \r\n    if (!snippets)\r\n      return false;\r\n    \r\n    let snippet = snippets.filter(snippet => snippetId == snippet.id)[0]; \r\n    console.log(snippet.text);\r\n    \r\n\r\n    this.props.onClickSaveButton({snippetId, data: {text: snippet.text}});\r\n  }\r\n\r\n\r\n  \r\n  onChangeEditor(value, snippet) {\r\n    snippet.text = value;\r\n  }\r\n \r\n  render() {\r\n    const className = classNames({\r\n      'editor': true,\r\n      'fullscreen': this.state.fullscreen\r\n    });\r\n\r\n    this.match = matchPath(this.props.location.pathname, {\r\n      path: '/project:projectId/component:componentId/snippet:snippetId'\r\n    });\r\n\r\n    if (this.props.snippets?.snippetsList?.data) {\r\n      const  snippet = this.props.snippets.snippetsList.data.filter(snippet => this.match.params.snippetId == snippet.id)[0];\r\n      \r\n    \r\n      return (\r\n        <div className={className} >\r\n          <div id=\"editor-area\" className=\"editor__area\">\r\n            <AceEditor\r\n              mode=\"javascript\"\r\n              ref={this.editor}\r\n              onChange={(value) => {this.onChangeEditor(value, snippet)}}\r\n              theme=\"tomorrow_night\"\r\n              value={snippet.text || ''}\r\n              name={'snippet_' + snippet.id}\r\n              editorProps={{ $blockScrolling: true }}\r\n              height='100%'\r\n              width='100%'\r\n              tabSize={2}\r\n              fontSize='16px'\r\n              placeholder='Вставте код, который хотите сохранить'\r\n              style={{padding: '10px'}}\r\n              setOptions={{\r\n                enableBasicAutocompletion: true,\r\n                enableLiveAutocompletion: true,\r\n                enableSnippets: true\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"editor__panel\">\r\n            <ul className=\"editor__controls\">\r\n              <li className=\"editor__control\">\r\n                <button className=\"editor__button\" onClick={this.onClickFullscreenButton}>\r\n                  <FontAwesomeIcon icon={faExpand} />\r\n                </button>\r\n              </li>\r\n              <li className=\"editor__control\">\r\n                <button className=\"editor__button\">\r\n                  <FontAwesomeIcon icon={faCopy} />\r\n                </button>\r\n              </li>\r\n              <li className=\"editor__control\">\r\n                <button className=\"editor__button\">\r\n                  <FontAwesomeIcon icon={faTrash} />\r\n                </button>\r\n              </li>\r\n              <li className=\"editor__control\">\r\n                <button className=\"editor__button\" onClick={() => { this.props.onClickSaveButton({snippetId: this.match.params.snippetId, data: {text: snippet.text}}) }}>\r\n                  <FontAwesomeIcon icon={faSave} />\r\n                </button>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      );\r\n      } else {\r\n        return <Loader />\r\n      }\r\n  }\r\n \r\n};\r\n\r\nexport default Editor;"]},"metadata":{},"sourceType":"module"}