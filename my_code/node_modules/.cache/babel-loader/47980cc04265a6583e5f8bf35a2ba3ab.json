{"ast":null,"code":"import { PUT_GOTTEN_USER_PROJECTS, PUT_GOTTEN_PROJECT_BY_ID, PUT_GOTTEN_OTHER_PROJECTS, PUT_CREATED_USER_PROJECT, PUT_DELETED_USER_PROJECT, PUT_ADDED_USER_IN_PROJECT, PUT_DELETED_USER_IN_PROJECT, PUT_ADDED_COMPONENT_IN_PROJECT } from './actions';\nimport store from '../index';\nconst initialState = {\n  myProjects: {},\n  otherProjects: {},\n  currentProject: {}\n}; // selectors \n\nfunction deleteUserById(users, id) {\n  return users.filter(user => user.id != id);\n}\n\nexport const projectsReduser = (state = initialState, action) => {\n  switch (action.type) {\n    case PUT_GOTTEN_USER_PROJECTS:\n      return { ...state,\n        myProjects: action.payload\n      };\n\n    case PUT_ADDED_COMPONENT_IN_PROJECT:\n      if (state.currentProject.categories.filter(category => category.id == action.payload.data.category.id).length > 0) {\n        const updatedCategories = state.currentProject.categories;\n      } else {\n        const updatedCategories = [...state.currentProject.categories, action.payload.data.category];\n      }\n\n      const updatedProjectStructure = updatedCategories.map(category => {\n        return { ...category,\n          components: [...state.currentProject.components, action.payload.data.component].filter(component => category.id == component['category_id'])\n        };\n      });\n      return { ...state,\n        currentProject: { ...state.currentProject,\n          components: [...state.currentProject.components, action.payload.data.component],\n          categories: [...state.currentProject.categories, action.payload.data.category],\n          projectStructure: updatedProjectStructure\n        }\n      };\n\n    case PUT_GOTTEN_PROJECT_BY_ID:\n      const projectStructure = action.payload.data.categories.map(category => {\n        return { ...category,\n          components: action.payload.data.components.filter(component => category.id == component['category_id'])\n        };\n      });\n      return { ...state,\n        currentProject: { ...action.payload.data,\n          projectStructure\n        }\n      };\n\n    case PUT_GOTTEN_OTHER_PROJECTS:\n      const filteredProjects = action.payload.data.map(project => {\n        return { ...project,\n          users: deleteUserById(project.users, action.payload.userId)\n        };\n      });\n      console.log(filteredProjects, action.payload);\n      console.log({ ...action.payload,\n        data: filteredProjects\n      });\n      return { ...state,\n        otherProjects: { ...action.payload,\n          data: filteredProjects\n        }\n      };\n\n    case PUT_CREATED_USER_PROJECT:\n      return { ...state,\n        myProjects: { ...state.myProjects,\n          data: [...state.myProjects.data, action.payload]\n        }\n      };\n\n    case PUT_DELETED_USER_PROJECT:\n      return { ...state,\n        myProjects: { ...state.myProjects,\n          data: state.myProjects.data.filter(project => project.id !== action.payload.data.id)\n        }\n      };\n\n    case PUT_ADDED_USER_IN_PROJECT:\n      let dataWithAddedUser = state.myProjects.data.map(project => {\n        if (project.id === action.payload.data['project_user']['project_id']) return { ...project,\n          users: [...(project.users || []), action.payload.data.user]\n        };\n        return project;\n      });\n      return { ...state,\n        myProjects: { ...state.myProjects,\n          data: dataWithAddedUser\n        }\n      };\n\n    case PUT_DELETED_USER_IN_PROJECT:\n      let dataWithOutAddedUser = state.myProjects.data.map(project => {\n        if (project.id == action.payload.data['project_id']) {\n          return { ...project,\n            users: project.users.filter(user => user.id != action.payload.data['user_id'])\n          };\n        }\n\n        return project;\n      });\n      return { ...state,\n        myProjects: { ...state.myProjects,\n          data: dataWithOutAddedUser\n        }\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["C:/Users/limon/Desktop/my projects/myCode/myCode.React/my_code/src/store/projects/reducers.js"],"names":["PUT_GOTTEN_USER_PROJECTS","PUT_GOTTEN_PROJECT_BY_ID","PUT_GOTTEN_OTHER_PROJECTS","PUT_CREATED_USER_PROJECT","PUT_DELETED_USER_PROJECT","PUT_ADDED_USER_IN_PROJECT","PUT_DELETED_USER_IN_PROJECT","PUT_ADDED_COMPONENT_IN_PROJECT","store","initialState","myProjects","otherProjects","currentProject","deleteUserById","users","id","filter","user","projectsReduser","state","action","type","payload","categories","category","data","length","updatedCategories","updatedProjectStructure","map","components","component","projectStructure","filteredProjects","project","userId","console","log","dataWithAddedUser","dataWithOutAddedUser"],"mappings":"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","sourcesContent":["import { \r\n  PUT_GOTTEN_USER_PROJECTS,\r\n  PUT_GOTTEN_PROJECT_BY_ID,\r\n  PUT_GOTTEN_OTHER_PROJECTS,\r\n  PUT_CREATED_USER_PROJECT,\r\n  PUT_DELETED_USER_PROJECT,\r\n  PUT_ADDED_USER_IN_PROJECT,\r\n  PUT_DELETED_USER_IN_PROJECT,\r\n  PUT_ADDED_COMPONENT_IN_PROJECT,\r\n} from './actions';\r\n\r\nimport store from '../index';\r\n\r\nconst initialState = {\r\n  myProjects: {},\r\n  otherProjects: {},\r\n  currentProject: {}\r\n};\r\n\r\n// selectors \r\nfunction deleteUserById(users, id) {\r\n  return users.filter(user => user.id != id);\r\n}\r\n\r\n\r\nexport const projectsReduser = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case PUT_GOTTEN_USER_PROJECTS: \r\n      return ({ \r\n        ...state,\r\n        myProjects: action.payload\r\n      });\r\n\r\n    case PUT_ADDED_COMPONENT_IN_PROJECT: \r\n      if (state.currentProject.categories.filter(category => category.id == action.payload.data.category.id).length > 0) {\r\n        const updatedCategories = state.currentProject.categories;\r\n      } else {\r\n        const updatedCategories = [\r\n          ...state.currentProject.categories, \r\n          action.payload.data.category\r\n        ];\r\n      }\r\n      const updatedProjectStructure = updatedCategories.map(category => {\r\n        return {\r\n          ...category, \r\n          components: [\r\n            ...state.currentProject.components,\r\n            action.payload.data.component\r\n          ].filter(\r\n            component => category.id == component['category_id']\r\n          )\r\n        }\r\n      });\r\n\r\n      return ({ \r\n        ...state,\r\n        currentProject: { \r\n          ...state.currentProject,\r\n          components: [\r\n            ...state.currentProject.components, \r\n            action.payload.data.component\r\n          ],\r\n          categories: [\r\n            ...state.currentProject.categories, \r\n            action.payload.data.category\r\n          ],\r\n          projectStructure: updatedProjectStructure\r\n        }\r\n      });\r\n\r\n    case PUT_GOTTEN_PROJECT_BY_ID: \r\n      const projectStructure = action.payload.data.categories.map(category => {\r\n        return {\r\n          ...category, \r\n          components: action.payload.data.components.filter(\r\n            component => category.id == component['category_id']\r\n          )\r\n        }\r\n      });\r\n\r\n      return ({ \r\n        ...state,\r\n        currentProject: { ...action.payload.data, projectStructure}\r\n      });\r\n    \r\n    case PUT_GOTTEN_OTHER_PROJECTS: \r\n      const filteredProjects = action.payload.data.map(project => {\r\n        return {\r\n          ...project, \r\n          users: deleteUserById(project.users, action.payload.userId)\r\n        }\r\n      });\r\n\r\n      console.log(filteredProjects, action.payload);\r\n      \r\n      console.log({\r\n        ...action.payload, \r\n        data: filteredProjects\r\n      })\r\n\r\n      return ({ \r\n        ...state,\r\n        otherProjects: {\r\n          ...action.payload, \r\n          data: filteredProjects\r\n        }\r\n      });\r\n\r\n    case PUT_CREATED_USER_PROJECT: \r\n      return ({\r\n        ...state,\r\n        myProjects: {...state.myProjects, data: [...state.myProjects.data, action.payload]}\r\n      });\r\n\r\n    case PUT_DELETED_USER_PROJECT: \r\n      return ({\r\n        ...state,\r\n        myProjects: { \r\n          ...state.myProjects, \r\n          data: state.myProjects.data.filter(project => project.id !== action.payload.data.id)\r\n        }\r\n      });\r\n    \r\n    case PUT_ADDED_USER_IN_PROJECT: \r\n      let dataWithAddedUser = state.myProjects.data.map(project => {\r\n        \r\n        if (project.id === action.payload.data['project_user']['project_id']) \r\n          return {...project, users: [...project.users || [], action.payload.data.user]}\r\n        \r\n        return project;\r\n      });\r\n    \r\n\r\n      return ({ ...state, myProjects: {...state.myProjects, data: dataWithAddedUser}});\r\n     \r\n\r\n    case PUT_DELETED_USER_IN_PROJECT: \r\n      let dataWithOutAddedUser = state.myProjects.data.map(project => {\r\n        \r\n        if (project.id == action.payload.data['project_id']) {\r\n          return {...project, users: project.users.filter(user => user.id != action.payload.data['user_id'])}\r\n        }\r\n        \r\n        return project;\r\n      });\r\n      return ({...state, myProjects: {...state.myProjects, data: dataWithOutAddedUser}});\r\n\r\n    \r\n    default: return state;  \r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}