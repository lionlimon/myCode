{"ast":null,"code":"import { takeEvery, put, call } from 'redux-saga/effects';\nimport { GET_USER_PROJECTS, CREATE_USER_PROJECT, DELETE_USER_PROJECT, putDeletedUserProject, putGottenUserProjects, putCreatedUserProject } from './actions';\nimport { addNotify } from '../notify/actions';\nimport * as config from '../config';\nimport store from '../index';\n\nfunction fetchGetProjects(data) {\n  const USER_TOKEN = store.getState().auth.token;\n  return fetch(config.URL_PROJECT_API, {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'Authorization': `Bearer ${USER_TOKEN}`\n    }\n  }).then(response => response.status == 404 || response.ok ? response.json() : Promise.reject(response)).catch(e => console.error(e));\n}\n\nfunction fetchCreateProjects(data) {\n  const USER_TOKEN = store.getState().auth.token;\n  console.log(data);\n  return fetch(config.URL_PROJECT_API, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${USER_TOKEN}`\n    }\n  }).then(response => response.status == 404 || response.ok ? response.json() : Promise.reject(response)).catch(e => console.error(e));\n}\n\nfunction fetchDeleteProjects(data) {\n  const USER_TOKEN = store.getState().auth.token;\n  console.log(data);\n  return fetch(config.URL_PROJECT_API, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${USER_TOKEN}`\n    }\n  }).then(response => response.status == 404 || response.ok ? response.json() : Promise.reject(response)).catch(e => console.error(e));\n}\n\nfunction* workerGetProjects(action) {\n  const response = yield call(fetchGetProjects, action.payload);\n  console.log(response);\n  if (response) yield put(putGottenUserProjects(response));\n}\n\nfunction* workerCreateProjects(action) {\n  const response = yield call(fetchCreateProjects, action.payload);\n  console.log(response);\n  if (response) yield put(putCreatedUserProject(response.data));\n}\n\nfunction* workerDeleteProjects(action) {\n  const response = yield call(fetchDeleteProjects, action.payload);\n  console.log(response);\n  if (response) yield put(putCreatedUserProject(response.data));\n}\n\nexport function* watchGetProjects() {\n  yield takeEvery(GET_USER_PROJECTS, workerGetProjects);\n}\nexport function* watchCreateProjects() {\n  yield takeEvery(CREATE_USER_PROJECT, workerCreateProjects);\n}\nexport function* watchDeleteProjects() {\n  console.log('watcher: ', CREATE_USER_PROJECT);\n  yield takeEvery(DELETE_USER_PROJECT, workerDeleteProjects);\n}","map":{"version":3,"sources":["C:/Users/limon/Desktop/my projects/myCode/myCode.React/my_code/src/store/projects/sagas.js"],"names":["takeEvery","put","call","GET_USER_PROJECTS","CREATE_USER_PROJECT","DELETE_USER_PROJECT","putDeletedUserProject","putGottenUserProjects","putCreatedUserProject","addNotify","config","store","fetchGetProjects","data","USER_TOKEN","getState","auth","token","fetch","URL_PROJECT_API","method","headers","then","response","status","ok","json","Promise","reject","catch","e","console","error","fetchCreateProjects","log","body","JSON","stringify","fetchDeleteProjects","workerGetProjects","action","payload","workerCreateProjects","workerDeleteProjects","watchGetProjects","watchCreateProjects","watchDeleteProjects"],"mappings":"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","sourcesContent":["import {takeEvery, put, call} from 'redux-saga/effects';\r\nimport {\r\n  GET_USER_PROJECTS,\r\n  CREATE_USER_PROJECT,\r\n  DELETE_USER_PROJECT,\r\n  putDeletedUserProject,\r\n  putGottenUserProjects,\r\n  putCreatedUserProject\r\n} from './actions';\r\nimport {addNotify} from '../notify/actions';\r\nimport * as config from '../config';\r\nimport store from '../index';\r\n\r\nfunction fetchGetProjects(data) {\r\n  const USER_TOKEN = store.getState().auth.token;\r\n\r\n  return fetch(config.URL_PROJECT_API, { \r\n    method: 'GET', \r\n    headers: {      \r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n      'Authorization': `Bearer ${USER_TOKEN}`\r\n    },\r\n  })\r\n    .then(response => response.status == 404 || response.ok ? response.json() : Promise.reject(response))\r\n    .catch((e) => console.error(e));\r\n  \r\n}\r\n\r\nfunction fetchCreateProjects(data) {\r\n  const USER_TOKEN = store.getState().auth.token;\r\n  console.log(data);\r\n  return fetch(config.URL_PROJECT_API, { \r\n    method: 'POST', \r\n    body: JSON.stringify(data),\r\n    headers: {      \r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${USER_TOKEN}`\r\n    },\r\n  })\r\n    .then(response => response.status == 404 || response.ok ? response.json() : Promise.reject(response))\r\n    .catch((e) => console.error(e));\r\n  \r\n}\r\n\r\nfunction fetchDeleteProjects(data) {\r\n  const USER_TOKEN = store.getState().auth.token;\r\n  console.log(data);\r\n  return fetch(config.URL_PROJECT_API, { \r\n    method: 'POST', \r\n    body: JSON.stringify(data),\r\n    headers: {      \r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${USER_TOKEN}`\r\n    },\r\n  })\r\n    .then(response => response.status == 404 || response.ok ? response.json() : Promise.reject(response))\r\n    .catch((e) => console.error(e));\r\n  \r\n}\r\n\r\nfunction* workerGetProjects(action) {\r\n  \r\n\tconst response = yield call(fetchGetProjects, action.payload);\r\n  console.log(response);\r\n\tif (response) \t\r\n    yield put(putGottenUserProjects(response));\r\n}\r\n\r\nfunction* workerCreateProjects(action) {\r\n  \r\n\tconst response = yield call(fetchCreateProjects, action.payload);\r\n  console.log(response);\r\n\tif (response) \t\r\n    yield put(putCreatedUserProject(response.data));\r\n}\r\n\r\nfunction* workerDeleteProjects(action) {\r\n  \r\n\tconst response = yield call(fetchDeleteProjects, action.payload);\r\n  console.log(response);\r\n\tif (response) \t\r\n    yield put(putCreatedUserProject(response.data));\r\n}\r\n\r\n\r\n\r\nexport function* watchGetProjects() {\r\n  yield takeEvery(GET_USER_PROJECTS, workerGetProjects);\r\n}\r\n\r\nexport function* watchCreateProjects() {\r\n  yield takeEvery(CREATE_USER_PROJECT, workerCreateProjects);\r\n}\r\n\r\nexport function* watchDeleteProjects() {\r\n  console.log('watcher: ', CREATE_USER_PROJECT)\r\n  yield takeEvery(DELETE_USER_PROJECT, workerDeleteProjects);\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}